(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{9078:(e,t,r)=>{Promise.resolve().then(r.bind(r,4348))},6046:(e,t,r)=>{"use strict";var o=r(6658);r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}})},5353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return s}});let o=r(2115);function s(e,t){let r=(0,o.useRef)(()=>{}),s=(0,o.useRef)(()=>{});return(0,o.useMemo)(()=>e&&t?o=>{null===o?(r.current(),s.current()):(r.current=a(e,o),s.current=a(t,o))}:e||t,[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3576:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return o}});let o=r(306)._(r(2115)).default.createContext(null)},1894:(e,t,r)=>{"use strict";r.d(t,{oK:()=>m,Fz:()=>h,Em:()=>d,bO:()=>l,l9:()=>c,FO:()=>n,sC:()=>i,Lx:()=>g,Xn:()=>u,DY:()=>f});var o=r(2651);let s="http://localhost:5000/api",a={GET_ROOMS:()=>s+"/rooms",GET_DELUXE_ROOMS:()=>s+"/deluxe-rooms",GET_SUPER_DELUXE_ROOMS:()=>s+"/super-deluxe-rooms",GET_FAMILY_ROOMS:()=>s+"/family-rooms",GET_DELUXE_ROOMSBYNUMBER:e=>"".concat(s,"/api/deluxe-rooms/?id=").concat(e),GET_SUPERDELUXE_ROOMSBYNUMBER:e=>s+"/super-deluxe-rooms/?id=".concat(e),GET_FAMILY_ROOMSBYNUMBER:e=>s+"/family-rooms/?id=".concat(e),GET_AMINITIES:()=>s+"/amenities",GET_ALL_BOOKING_ROOMS:()=>s+"/bookings",POST_BOOKING_ROOMS:()=>s+"/bookings",PUT_FAMILY_ROOM:()=>s+"/family-rooms/".concat(id),PUT_DELUXE_ROOM:e=>s+"/deluxe-rooms/".concat(e),PUT_SUPERDELUXE_ROOM:()=>s+"/super-deluxe-rooms/".concat(id),LOGIN_USER:()=>s+"/auth/login",REGISTER_USER:()=>s+"/auth/register",MAIL_URL:()=>s+"/email/send-booking-emails"};Object.freeze(a);let n=()=>o.A.get(a.GET_ROOMS()).then(e=>(console.log("API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error fetching rooms data:",e),{result:null})),l=()=>o.A.get(a.GET_DELUXE_ROOMS()).then(e=>(console.log("Deluxe Room API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error fetching Deluxe Room data:",e),{result:null})),i=()=>o.A.get(a.GET_SUPER_DELUXE_ROOMS()).then(e=>(console.log("Super Deluxe Room API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error fetching Super Deluxe Room data:",e),{result:null})),c=()=>o.A.get(a.GET_FAMILY_ROOMS()).then(e=>(console.log("Family Deluxe Room API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error fetching Family Deluxe Room data:",e),{result:null})),u=e=>fetch(a.POST_BOOKING_ROOMS(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.ok?e.json():e.text().then(t=>{throw Error("Booking failed: ".concat(e.statusText,". Response body: ").concat(t))})).then(e=>(console.log("Booking successful",e),e)).catch(e=>{throw console.error("Error during booking:",e.message),e});async function d(){try{let e=await fetch(a.GET_AMINITIES(),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return await e.json()}catch(e){throw console.error("Error fetching amenities:",e),e}}async function m(e,t){try{let r={...t,available:!1},s=await o.A.put(a.PUT_DELUXE_ROOM(e),r);return console.log("Updated Room Data:",s.data),s.data}catch(e){throw console.error("Error updating deluxe room:",e),e}}let h=()=>{let e=a.GET_ALL_BOOKING_ROOMS();return console.log("Requesting URL:",e),o.A.get(e).then(e=>(console.log("API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error details:",{message:e.message,code:e.code,config:e.config,response:e.response}),{result:null}))},g=e=>fetch(a.LOGIN_USER(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.ok?e.json():Promise.reject("Failed to login")).then(e=>(localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),console.log("Login Successful:",e),e.user)).catch(e=>{throw console.error("Login Error:",e),e});function f(e){return fetch(a.REGISTER_USER(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>{if(!e.ok)throw Error("Failed to register user");return e.json()}).then(e=>(console.log("User registered successfully",e),e)).catch(e=>{throw console.error("Error registering user:",e),e})}},4348:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var o=r(5155),s=r(2115),a=r(9506),n=r(5565),l=r(2615),i=r(6046);let c=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),u=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let m=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:l="",children:i,iconNode:c,...m}=e;return(0,s.createElement)("svg",{ref:t,...d,width:o,height:o,stroke:r,strokeWidth:n?24*Number(a)/Number(o):a,className:u("lucide",l),...m},[...c.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(i)?i:[i]])}),h=((e,t)=>{let r=(0,s.forwardRef)((r,o)=>{let{className:a,...n}=r;return(0,s.createElement)(m,{ref:o,iconNode:t,className:u("lucide-".concat(c(e)),a),...n})});return r.displayName="".concat(e),r})("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var g=r(1894),f=r(9208);let p=()=>{let e=(0,i.useRouter)(),{data:t,status:r}=(0,l.useSession)(),[c,u]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),[p,x]=(0,s.useState)(""),[E,O]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[_,R]=(0,s.useState)(""),[S,N]=(0,s.useState)(""),[j,w]=(0,s.useState)("");if((0,s.useEffect)(()=>{console.log("Auth Status:",r),console.log("Session:",t)},[r,t]),(0,s.useEffect)(()=>{"authenticated"===r&&t&&(console.log("Authenticated, redirecting to rooms..."),e.push("/rooms"))},[r,t,e]),"loading"===r)return(0,o.jsx)("div",{className:"min-h-screen flex justify-center items-center",children:(0,o.jsx)(h,{className:"h-8 w-8 animate-spin"})});let v=async t=>{if(t.preventDefault(),m(!0),x(""),!y||!S){x("Email and Password are required."),m(!1);return}if(c&&S!==j){x("Passwords do not match."),m(!1);return}try{if(c){let t=await (0,g.DY)({fullName:E,email:y,mobileNumber:_,password:S,confirmPassword:j});t&&(f.A.set("userFullName",E,{expires:7}),f.A.set("userEmail",y,{expires:7}),f.A.set("token",t.token,{expires:7}),e.push("/rooms"))}else{let t=await (0,g.Lx)({email:y,password:S});t&&(f.A.set("userFullName",t.fullName,{expires:7}),f.A.set("userEmail",t.email,{expires:7}),f.A.set("token",t.token,{expires:7}),e.push("/rooms"))}}catch(e){x("An error occurred. Please try again.")}finally{m(!1)}};return(0,o.jsx)("section",{className:"min-h-screen flex justify-center items-center w-full bg-yellow-600",children:(0,o.jsxs)("div",{className:"bg-[#dfa674] rounded-2xl flex max-w-3xl p-5 items-center",children:[(0,o.jsxs)("div",{className:"md:w-1/2 px-8",children:[(0,o.jsx)("h2",{className:"font-bold text-3xl text-[#002D74]",children:c?"Sign Up":"Login"}),(0,o.jsx)("p",{className:"text-sm mt-4 text-[#002D74]",children:c?"Create a new account":"Login with your email and password"}),p&&(0,o.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mt-4",role:"alert",children:(0,o.jsx)("span",{className:"block sm:inline",children:p})}),(0,o.jsxs)("form",{onSubmit:v,className:"flex flex-col",children:[c&&(0,o.jsx)("input",{className:"p-2 mt-2 rounded-xl border",type:"text",name:"fullName",placeholder:"Full Name",value:E,onChange:e=>O(e.target.value)}),(0,o.jsx)("input",{className:"p-2 mt-2 rounded-xl border",type:"email",name:"email",placeholder:"Enter Email",value:y,onChange:e=>b(e.target.value)}),c&&(0,o.jsx)("input",{className:"p-2 mt-2 rounded-xl border",type:"text",name:"mobileNumber",placeholder:"Enter Mobile Number",value:_,onChange:e=>R(e.target.value)}),(0,o.jsx)("input",{className:"p-2 mt-2 rounded-xl border",type:"password",name:"password",placeholder:"Enter Password",value:S,onChange:e=>N(e.target.value)}),c&&(0,o.jsx)("input",{className:"p-2 mt-2 rounded-xl border",type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:j,onChange:e=>w(e.target.value)}),(0,o.jsx)("button",{className:"bg-[#002D74] text-white py-2 rounded-xl hover:scale-105 duration-300 hover:bg-[#206ab1] font-medium mt-4",type:"submit",children:c?"Sign Up":"Login"})]}),(0,o.jsxs)("div",{className:"mt-6 items-center text-gray-100 flex",children:[(0,o.jsx)("hr",{className:"border-gray-300 flex-grow"}),(0,o.jsx)("p",{className:"text-center text-sm mx-4",children:"OR"}),(0,o.jsx)("hr",{className:"border-gray-300 flex-grow"})]}),(0,o.jsx)("button",{disabled:d,className:"bg-white border py-2 w-full rounded-xl mt-5 flex justify-center items-center text-sm hover:scale-105 duration-300 hover:bg-gray-50 font-medium disabled:opacity-70 disabled:hover:scale-100",children:d?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h,{className:"mr-2 h-5 w-5 animate-spin"}),"Signing in..."]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.F4b,{className:"mr-3 h-6 w-6"}),"Sign in with Google"]})}),(0,o.jsx)("div",{className:"mt-10 text-sm border-b border-gray-500 py-5 flex items-center justify-center",children:(0,o.jsx)("button",{className:"text-[#002D74] hover:underline",onClick:()=>u(!c),children:c?"Already have an account? Login":"Don't have an account? Sign Up"})})]}),(0,o.jsx)("div",{className:"md:block hidden w-1/2",children:(0,o.jsx)(n.default,{src:"/images/img3.jpg",width:500,height:400,className:"rounded-2xl max-h-[1600px]",alt:"login form image"})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[753,565,53,14,441,517,358],()=>t(9078)),_N_E=e.O()}]);