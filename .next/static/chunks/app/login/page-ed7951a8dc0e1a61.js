(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{49078:(e,t,r)=>{Promise.resolve().then(r.bind(r,64348))},76046:(e,t,r)=>{"use strict";var o=r(66658);r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}})},71894:(e,t,r)=>{"use strict";r.d(t,{kr:()=>x,Fz:()=>u,V6:()=>p,bO:()=>l,l9:()=>c,SW:()=>g,FO:()=>n,sC:()=>i,Lx:()=>m,Xn:()=>d,DY:()=>h,rM:()=>E});var o=r(82651);let s="https://localhost:5000/api",a={GET_ROOMS:()=>s+"/rooms",GET_DELUXE_ROOMS:()=>s+"/deluxe-rooms",GET_SUPER_DELUXE_ROOMS:()=>s+"/super-deluxe-rooms",GET_FAMILY_ROOMS:()=>s+"/family-rooms",GET_DELUXE_ROOMSBYNUMBER:e=>"".concat(s,"/api/deluxe-rooms/?id=").concat(e),GET_SUPERDELUXE_ROOMSBYNUMBER:e=>s+"/super-deluxe-rooms/?id=".concat(e),GET_FAMILY_ROOMSBYNUMBER:e=>s+"/family-rooms/?id=".concat(e),GET_AMINITIES:()=>s+"/amenities",GET_ALL_BOOKING_ROOMS:()=>s+"/bookings",POST_BOOKING_ROOMS:()=>s+"/bookings",PUT_FAMILY_ROOM:()=>s+"/family-rooms/".concat(id),PUT_DELUXE_ROOM:e=>s+"/deluxe-rooms/".concat(e),PUT_SUPERDELUXE_ROOM:()=>s+"/super-deluxe-rooms/".concat(id),LOGIN_USER:()=>s+"/auth/login",REGISTER_USER:()=>s+"/auth/register",MAIL_URL:()=>"https://hotelsudarshan.com:5000/send-email",GET_ALL_ROOMS:()=>s+"/allrooms",GET_FOOTER:()=>s+"/footer",GET_AMENITIES_PAGE:()=>s+"/hotel",GET_ABOUT_US:()=>s+"/aboutus"};Object.freeze(a);let n=()=>o.A.get(a.GET_ROOMS()).then(e=>(console.log("API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error fetching rooms data:",e),{result:null})),l=()=>o.A.get(a.GET_DELUXE_ROOMS()).then(e=>(console.log("Deluxe Room API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error fetching Deluxe Room data:",e),{result:null})),i=()=>o.A.get(a.GET_SUPER_DELUXE_ROOMS()).then(e=>(console.log("Super Deluxe Room API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error fetching Super Deluxe Room data:",e),{result:null})),c=()=>o.A.get(a.GET_FAMILY_ROOMS()).then(e=>(console.log("Family Deluxe Room API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error fetching Family Deluxe Room data:",e),{result:null})),d=e=>fetch(a.POST_BOOKING_ROOMS(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.ok?e.json():e.text().then(t=>{let r="Booking failed: ".concat(e.statusText,". Response body: ").concat(t);throw console.error(r),Error(r)})).then(e=>(console.log("Booking successful",e),e)).catch(e=>{throw console.error("Error during booking:",e.message),e}),u=()=>{let e=a.GET_ALL_BOOKING_ROOMS();return console.log("Requesting URL:",e),o.A.get(e).then(e=>(console.log("API Response:",e.data),{result:e.data})).catch(e=>(console.error("Error details:",{message:e.message,code:e.code,config:e.config,response:e.response}),{result:null}))},m=e=>fetch(a.LOGIN_USER(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.ok?e.json():Promise.reject("Failed to login")).then(e=>(localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),console.log("Login Successful:",e),e.user)).catch(e=>{throw console.error("Login Error:",e),e});function h(e){return fetch(a.REGISTER_USER(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>{if(!e.ok)throw Error("Failed to register user");return e.json()}).then(e=>(console.log("User registered successfully",e),e)).catch(e=>{throw console.error("Error registering user:",e),e})}let g=async()=>{try{let e=await o.A.get(a.GET_FOOTER());return console.log("getFooter API Response:",e.data),e.data}catch(e){throw console.error("Error fetching getFooter data:",e),e}},p=async()=>{try{let e=await o.A.get(a.GET_AMENITIES_PAGE());return console.log("getAmenitiesPage API Response:",e.data),e.data}catch(e){throw console.error("Error fetching getAmenitiesPage data:",e),e}},x=async()=>{try{let e=await o.A.get(a.GET_ABOUT_US());return console.log("getAboutUs API Response:",e.data),e.data}catch(e){throw console.error("Error fetching getAboutUs data:",e),e}},E=async e=>{try{let t=await fetch(a.MAIL_URL(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("Sending request to:",a.MAIL_URL()),!t.ok)throw Error("Failed to send the email. Status: ".concat(t.status));try{let e=await t.json();return console.log("Email sent successfully:",e),e}catch(e){throw console.error("Failed to parse JSON response:",e),Error("Received an invalid JSON response from the server")}}catch(e){return console.error("Error submitting form:",e),{error:e.message||"An unknown error occurred"}}}},64348:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var o=r(95155),s=r(12115),a=r(59506),n=r(5565),l=r(2615),i=r(76046);let c=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let m=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:l="",children:i,iconNode:c,...m}=e;return(0,s.createElement)("svg",{ref:t,...u,width:o,height:o,stroke:r,strokeWidth:n?24*Number(a)/Number(o):a,className:d("lucide",l),...m},[...c.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(i)?i:[i]])}),h=((e,t)=>{let r=(0,s.forwardRef)((r,o)=>{let{className:a,...n}=r;return(0,s.createElement)(m,{ref:o,iconNode:t,className:d("lucide-".concat(c(e)),a),...n})});return r.displayName="".concat(e),r})("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var g=r(71894),p=r(89208);let x=()=>{let e=(0,i.useRouter)(),{data:t,status:r}=(0,l.useSession)(),[c,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!1),[x,E]=(0,s.useState)(""),[f,O]=(0,s.useState)(""),[S,R]=(0,s.useState)(""),[_,y]=(0,s.useState)(""),[N,w]=(0,s.useState)(""),[b,A]=(0,s.useState)("");if((0,s.useEffect)(()=>{console.log("Auth Status:",r),console.log("Session:",t)},[r,t]),(0,s.useEffect)(()=>{"authenticated"===r&&t&&(console.log("Authenticated, redirecting to rooms..."),e.push("/rooms"))},[r,t,e]),"loading"===r)return(0,o.jsx)("div",{className:"min-h-screen flex justify-center items-center",children:(0,o.jsx)(h,{className:"h-8 w-8 animate-spin"})});let j=async t=>{if(t.preventDefault(),m(!0),E(""),!S||!N){E("Email and Password are required."),m(!1);return}if(c&&N!==b){E("Passwords do not match."),m(!1);return}try{if(c){let t=await (0,g.DY)({fullName:f,email:S,mobileNumber:_,password:N,confirmPassword:b});t&&(p.A.set("userFullName",f,{expires:7}),p.A.set("userEmail",S,{expires:7}),p.A.set("token",t.token,{expires:7}),e.push("/rooms"))}else{let t=await (0,g.Lx)({email:S,password:N});t&&(p.A.set("userFullName",t.fullName,{expires:7}),p.A.set("userEmail",t.email,{expires:7}),p.A.set("token",t.token,{expires:7}),window.location.reload(),e.push("/rooms"))}}catch(e){E("An error occurred. Please try again.")}finally{m(!1)}};return(0,o.jsx)("section",{className:"min-h-screen flex justify-center items-center w-full bg-yellow-600",children:(0,o.jsxs)("div",{className:"bg-[#dfa674] rounded-2xl flex max-w-3xl p-5 items-center",children:[(0,o.jsxs)("div",{className:"md:w-1/2 px-8",children:[(0,o.jsx)("h2",{className:"font-bold text-3xl text-[#002D74]",children:c?"Sign Up":"Login"}),(0,o.jsx)("p",{className:"text-sm mt-4 text-[#002D74]",children:c?"Create a new account":"Login with your email and password"}),x&&(0,o.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mt-4",role:"alert",children:(0,o.jsx)("span",{className:"block sm:inline",children:x})}),(0,o.jsxs)("form",{onSubmit:j,className:"flex flex-col",children:[c&&(0,o.jsx)("input",{className:"p-2 mt-2 rounded-xl border",type:"text",name:"fullName",placeholder:"Full Name",value:f,onChange:e=>O(e.target.value)}),(0,o.jsx)("input",{className:"p-2 mt-2 rounded-xl border",type:"email",name:"email",placeholder:"Enter Email",value:S,onChange:e=>R(e.target.value)}),c&&(0,o.jsx)("input",{className:"p-2 mt-2 rounded-xl border",type:"text",name:"mobileNumber",placeholder:"Enter Mobile Number",value:_,onChange:e=>y(e.target.value)}),(0,o.jsx)("input",{className:"p-2 mt-2 rounded-xl border",type:"password",name:"password",placeholder:"Enter Password",value:N,onChange:e=>w(e.target.value)}),c&&(0,o.jsx)("input",{className:"p-2 mt-2 rounded-xl border",type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:b,onChange:e=>A(e.target.value)}),(0,o.jsx)("button",{className:"bg-[#002D74] text-white py-2 rounded-xl hover:scale-105 duration-300 hover:bg-[#206ab1] font-medium mt-4",type:"submit",children:c?"Sign Up":"Login"})]}),(0,o.jsxs)("div",{className:"mt-6 items-center text-gray-100 flex",children:[(0,o.jsx)("hr",{className:"border-gray-300 flex-grow"}),(0,o.jsx)("p",{className:"text-center text-sm mx-4",children:"OR"}),(0,o.jsx)("hr",{className:"border-gray-300 flex-grow"})]}),(0,o.jsx)("button",{disabled:u,onClick:()=>(0,l.signIn)("google"),className:"bg-white border py-2 w-full rounded-xl mt-5 flex justify-center items-center text-sm hover:scale-105 duration-300 hover:bg-gray-50 font-medium disabled:opacity-70 disabled:hover:scale-100",children:u?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h,{className:"mr-2 h-5 w-5 animate-spin"}),"Signing in..."]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.F4b,{className:"mr-3 h-6 w-6"}),"Sign in with Google"]})}),(0,o.jsx)("div",{className:"mt-10 text-sm border-b border-gray-500 py-5 flex items-center justify-center",children:(0,o.jsx)("button",{className:"text-[#002D74] hover:underline",onClick:()=>d(!c),children:c?"Already have an account? Login":"Don't have an account? Sign Up"})})]}),(0,o.jsx)("div",{className:"md:block hidden w-1/2",children:(0,o.jsx)(n.default,{src:"/images/img3.jpg",width:500,height:400,className:"rounded-2xl max-h-[1600px]",alt:"login form image"})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[753,552,565,572,441,517,358],()=>t(49078)),_N_E=e.O()}]);